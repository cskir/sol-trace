syntax = "proto3";

package cli;

service CliService {
  rpc Init(InitRequest) returns (InitResponse);
  rpc Subscribe(SubscribeRequest) returns (stream SubscribeResponse);
  rpc Unsubscribe(UnsubscribeRequest) returns (UnsubscribeResponse);
  rpc Holdings(HoldingsRequest) returns (HoldingsResponse);
  rpc GetTrade(GetTradeRequest) returns (GetTradeResponse);
  rpc Call(CallRequest) returns (CallResponse); 
}

message InitRequest {
  string wallet = 1;
  repeated string tokens = 2;
}

message InitResponse {
  string client_id = 1;
}

message SubscribeRequest {  
}

message SubscribeResponse {
  string message = 1;
}

message UnsubscribeRequest {  
}

message UnsubscribeResponse {
  string message = 1;
}

message HoldingsRequest {
}

message Holding {
  string name = 1;
  string symbol = 2;
  string address = 3;
  string balance = 4;
  optional double usd_price = 5;
  optional double usd_value = 6;
}

message HoldingsResponse {
  repeated Holding holdings = 1;
}

message GetTradeRequest {
  string signature = 1;
}

message Transfer {
    string mint= 1;
    optional string symbol = 2;
    optional string name = 3;
    double amount = 4;
    optional double usd_price = 5;
}

message Trade {
    repeated Transfer from = 1;
    repeated Transfer to = 2;
}

message GetTradeResponse {
  Trade trade = 1;
}

message CallRequest {
  string payload = 1;
}

message CallResponse {
  string reply = 1;
}